<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grammar for Pros - ProSpeak English</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 120px 24px 80px;
        }

        .quiz-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 24px;
        }

        .question {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 24px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            padding: 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-dark);
            text-align: left;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .option-btn:hover {
            border-color: var(--primary);
            background: rgba(37, 99, 235, 0.05);
        }

        .option-btn.correct {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--success);
            color: var(--success);
        }

        .option-btn.wrong {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--error);
            color: var(--error);
        }

        .explanation {
            margin-top: 16px;
            font-size: 0.95rem;
            color: var(--text-secondary);
            display: none;
            padding: 16px;
            background: var(--bg-darker);
            border-radius: 8px;
        }

        .score-board {
            text-align: center;
            margin-bottom: 40px;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-muted);
        }
    </style>
</head>

<body>
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="../../index.html" class="nav-logo"><i class="fas fa-language"></i><span>ProSpeak</span></a>
            <div class="nav-actions"><a href="../practice.html" class="btn btn-outline btn-sm">Back to Tools</a></div>
        </div>
    </nav>

    <div class="container">
        <h1 class="gradient-text" style="text-align: center; margin-bottom: 40px;">Corporate Grammar Quiz</h1>

        <div class="score-board">
            Score: <span id="score">0</span> / 5
        </div>

        <div id="quiz-container">
            <!-- Questions injected via JS -->
        </div>

        <div style="text-align: center; margin-top: 40px;">
            <button class="btn btn-primary" onclick="location.reload()"><i class="fas fa-redo"></i> Restart
                Quiz</button>
        </div>
    </div>

    <script>
        const questions = [
            {
                text: "Which sentence is more polite for a request?",
                options: [
                    "Send me the report by 5 PM.",
                    "Could you please send the report by 5 PM?",
                    "I want the report by 5 PM."
                ],
                correct: 1,
                explanation: "Using 'Could you please' softens the request and makes it sound less demanding."
            },
            {
                text: "Choose the correct preposition: 'I will report ___ you regarding the progress.'",
                options: [
                    "to",
                    "at",
                    "on"
                ],
                correct: 0,
                explanation: "You report 'to' a person (your manager). You report 'on' a topic."
            },
            {
                text: "Which is correct for a past completed action?",
                options: [
                    "I have finished the task yesterday.",
                    "I finished the task yesterday.",
                    "I finish the task yesterday."
                ],
                correct: 1,
                explanation: "Use Past Simple ('finished') when a specific time ('yesterday') is mentioned."
            },
            {
                text: "Identify the professional email sign-off:",
                options: [
                    "Cheers,",
                    "Love,",
                    "Best regards,"
                ],
                correct: 2,
                explanation: "'Best regards' is the standard professional closing. 'Cheers' is casual, 'Love' is personal."
            },
            {
                text: "Which sentence avoids 'blame'?",
                options: [
                    "You broke the build.",
                    "The build seems to be broken.",
                    "Why did you break it?"
                ],
                correct: 1,
                explanation: "Using passive voice ('The build seems to be broken') focuses on the problem, not the person."
            }
        ];

        let score = 0;
        const container = document.getElementById('quiz-container');

        function initQuiz() {
            questions.forEach((q, index) => {
                const card = document.createElement('div');
                card.className = 'quiz-card';

                let optionsHtml = '';
                q.options.forEach((opt, i) => {
                    optionsHtml += `<button class="option-btn" onclick="checkAnswer(this, ${index}, ${i})">${opt}</button>`;
                });

                card.innerHTML = `
                    <div class="question">${index + 1}. ${q.text}</div>
                    <div class="options">${optionsHtml}</div>
                    <div class="explanation" id="expl-${index}">${q.explanation}</div>
                `;
                container.appendChild(card);
            });
        }

        function checkAnswer(btn, qIndex, optIndex) {
            const q = questions[qIndex];
            const parent = btn.parentElement;
            const expl = document.getElementById(`expl-${qIndex}`);

            // Disable all buttons in this card
            const buttons = parent.querySelectorAll('.option-btn');
            buttons.forEach(b => b.disabled = true);

            if (optIndex === q.correct) {
                btn.classList.add('correct');
                score++;
                document.getElementById('score').innerText = score;
                btn.innerHTML += ' <i class="fas fa-check"></i>';
            } else {
                btn.classList.add('wrong');
                btn.innerHTML += ' <i class="fas fa-times"></i>';
                buttons[q.correct].classList.add('correct'); // Show correct answer
            }

            expl.style.display = 'block';
        }

        initQuiz();
    </script>
</body>

</html>